# è®¡ç½‘ç»¼è¿°


<div id="progress-container">
  <div id="progress-bar"></div>
</div>

!!! tip "é‡è¦çš„äº‹æƒ…"
    å¦‚æ­¤æ¦‚å¿µæ€§çš„è¯¾ç¨‹ï¼Œç«Ÿç„¶æ²¡æœ‰åœ¨å¼€å¤´æ•´ç†å‡ºå­¦ä¹ è·¯å¾„ï¼Œè¿™è®©æˆ‘å¾ˆä¸è§£ ~~è‡ªå·±éª‚è‡ªå·±~~  
    å¦‚æœéœ€è¦çš„è¯ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹[è®¡ç®—æœºç½‘ç»œæ¨¡å‹ï¼ˆTCPäº”å±‚æ¨¡å‹ï¼‰](https://zhuanlan.zhihu.com/p/347995226)ï¼Œå…¶ä¸­çš„TCP/IPäº”å±‚åè®®ç°‡å°±æ˜¯è¿™é—¨è¯¾ç¨‹çš„é‡ç‚¹

!!! tip "æ€ç»´å¯¼å›¾"

    [ç‹æ™“ä¸œè€å¸ˆ](https://baike.baidu.com/item/%E7%8E%8B%E6%99%93%E4%B8%9C/3698813)æ•´ç†çš„[æ€ç»´å¯¼å›¾](https://pan.baidu.com/s/1lATjczE6lm5mk33QL2xPVQ?pwd=1369)ï¼Œä¹Ÿè®¸å¯¹ä½ æœ‰æ‰€å¸®åŠ©

!!! quote ""

!!! quote "protocols define"
    format, order of messages sent and received among networkentities,  
    and actions taken on message transmission, receipt.


!!! quote "[Cerf and Kahn](http://www.computer-timeline.com/timeline/vint-cerf-and-bob-kahn/) æ¶æ„çš„ç†è®ºç‰¹ç‚¹"
    
    1. minimalismï¼Œautonomy
    2. best effort service model
    3. stateless routers
    4. decentralized control

## åº”ç”¨å±‚åè®®

ç¬”è®°ä¸­æ¶‰åŠåº”ç”¨å±‚åè®®

- HTTP
- DNS
- FTP
- SMTP/POP3
- IMAP
- P2P
- DHCP  

å…±8ä¸ª  

ä¸‹é¢æ˜¯ä¸€äº›åŸºç¡€çš„çŸ¥è¯†ç‚¹

=== "ä½œç”¨"

    åº”ç”¨å±‚åè®®è§„å®šï¼š  

    - ç±»å‹ï¼ˆè¯·æ±‚/åº”ç­”æŠ¥æ–‡ï¼‰
    - è¯­æ³•ï¼ˆæ ¼å¼ï¼‰
    - è¯­ä¹‰ï¼ˆæ¯ä½çš„ 0/1 åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼‰
    - è§„åˆ™

=== "æ¶æ„"

    - CS(Client-Server)  
        serverä¸€ç›´å¼€æœºï¼Œé™æ€IPï¼Œå¹¶è¦æ±‚å¯ä¼¸ç¼©çš„æœåŠ¡å™¨å†œåœº  
        clientåªä¸serveré€šä¿¡ï¼ŒåŠ¨æ€IP

    - P2P(Pear to Pear)  
        ä¼¸ç¼©æ€§å¼ºï¼Œbut hard to manage  
        
    - Hybrid of CS and P2P


=== "å¸¸ç”¨å®šä¹‰"

    - IPC    interprocess connectionï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰
    - socket    ç«¯å£å¤§é—¨ï¼Œä½¿åº”ç”¨å±‚ä¸ä¼ è¾“å±‚æƒ³é€š
    - L/R(ä¼ è¾“ä¸€ç»„å¤šå°‘ç§’)=1/ä¼ è¾“ç‡
    - å¸¦å®½-ä¼ æ’­æ—¶å»¶ç§¯=é“¾è·¯ä¸Šçš„æœ€å¤§æ¯”ç‰¹æ•°


=== "éœ€è¦è€ƒè™‘çš„é—®é¢˜"

    - data loss
    - timing
    - bandwidth
    - security

---

### HTTP åè®®

è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHypertext Transfer Protocol,HTTPï¼‰æ˜¯Webçš„åŸºç¡€ï¼Œä¹Ÿæ˜¯äº’è”ç½‘çš„åŸºç¡€  
HTTPåè®®æ˜¯åŸºäºTCP/IPåè®®çš„ï¼Œå®ƒå±äºåº”ç”¨å±‚åè®®


#### ç‰¹ç‚¹



1. æ— çŠ¶æ€æ€§ï¼ˆStatelessï¼‰

HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªè¯·æ±‚ä»å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒæœåŠ¡å™¨ä¸ä¼šä¿å­˜å…³äºå®¢æˆ·ç«¯çš„ä»»ä½•çŠ¶æ€ä¿¡æ¯ã€‚æœåŠ¡å™¨æ— æ³•é€šè¿‡ HTTP åè®®æœ¬èº«è®°ä½å®¢æˆ·ç«¯ä¹‹å‰å‘é€çš„è¯·æ±‚å†…å®¹æˆ–çŠ¶æ€
      
- ä¼˜ç‚¹ï¼šæå¤§åœ°ç®€åŒ–äº†æœåŠ¡å™¨çš„è®¾è®¡ï¼Œä½¿å¾—æœåŠ¡å™¨èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°å¤„ç†å¤§é‡çš„è¯·æ±‚ï¼Œå› ä¸ºä¸éœ€è¦ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯ç»´æŠ¤å¤æ‚çš„çŠ¶æ€ä¿¡æ¯ã€‚è¿™ä¹Ÿæœ‰åˆ©äºæœåŠ¡å™¨çš„æ‰©å±•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°é€šè¿‡å¢åŠ æœåŠ¡å™¨æ•°é‡æ¥åº”å¯¹æ›´å¤šçš„å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè€Œä¸ç”¨æ‹…å¿ƒçŠ¶æ€åŒæ­¥çš„é—®é¢˜

- ç¼ºç‚¹ï¼šåœ¨ä¸€äº›éœ€è¦è®°å½•ç”¨æˆ·ä¼šè¯æˆ–çŠ¶æ€çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œå¦‚ç”¨æˆ·ç™»å½•åçš„æ“ä½œè®°å½•ã€è´­ç‰©è½¦ä¸­çš„å•†å“ä¿¡æ¯ç­‰ï¼Œç”±äº HTTP æœ¬èº«æ— çŠ¶æ€ï¼Œå°±éœ€è¦é€šè¿‡å…¶ä»–æ–¹å¼æ¥å®ç°çŠ¶æ€çš„ä¿æŒã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ cookies æˆ–è€…åœ¨è¯·æ±‚ä¸­æºå¸¦ç‰¹å®šçš„ä¼šè¯æ ‡è¯†ç¬¦ï¼ˆå¦‚ Session IDï¼‰ï¼Œè®©æœåŠ¡å™¨èƒ½å¤Ÿæ ¹æ®è¿™äº›ä¿¡æ¯è¯†åˆ«å‡ºæ˜¯åŒä¸€ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä»è€Œåœ¨æœåŠ¡å™¨ç«¯æˆ–è€…å…¶ä»–åœ°æ–¹æŸ¥æ‰¾å¹¶æ¢å¤ç›¸åº”çš„çŠ¶æ€

---

2. ç¼“å­˜æœºåˆ¶ï¼ˆCacheï¼‰

=== "æ¡ä»¶ GET"

    å®¢æˆ·ç«¯åœ¨å‘é€ GET è¯·æ±‚æ—¶ï¼Œä¼šæºå¸¦ä¸€äº›æ¡ä»¶ä¿¡æ¯ï¼Œå¦‚ If-Modified-Since å¤´éƒ¨å­—æ®µï¼Œç”¨äºå‘Šè¯‰æœåŠ¡å™¨åªæœ‰å½“èµ„æºè‡ªæŒ‡å®šæ—¶é—´åè¢«ä¿®æ”¹è¿‡æ—¶æ‰è¿”å›æ–°çš„èµ„æºå†…å®¹  

    * å¦‚æœæœåŠ¡å™¨åˆ¤æ–­èµ„æºæ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œå°±ä¼šè¿”å› 304 Not Modified çŠ¶æ€ç ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°è¿™ä¸ªå“åº”åï¼Œä¼šç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„èµ„æºï¼Œè€Œä¸éœ€è¦å†ä»æœåŠ¡å™¨è·å–å®Œæ•´çš„èµ„æºå†…å®¹ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“çš„æ•°æ®é‡ï¼Œæé«˜è®¿é—®é€Ÿåº¦  
    * å¦‚æœèµ„æºè¢«ä¿®æ”¹è¿‡ï¼ŒæœåŠ¡å™¨åˆ™ä¼šè¿”å›æ–°çš„èµ„æºå†…å®¹å’Œ 200 OK çŠ¶æ€ç ï¼Œå®¢æˆ·ç«¯ä¼šæ›´æ–°æœ¬åœ°ç¼“å­˜å¹¶æ˜¾ç¤ºæ–°çš„èµ„æº

=== "æœåŠ¡å™¨ç¼“å­˜ä¸ä»£ç†ç¼“å­˜"

    æœåŠ¡å™¨æœ¬èº«å¯ä»¥å¯¹ä¸€äº›ç»å¸¸è¢«è¯·æ±‚çš„èµ„æºè¿›è¡Œç¼“å­˜  
    å½“å®¢æˆ·ç«¯è¯·æ±‚è¿™äº›èµ„æºæ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥ç›´æ¥ä»æœ¬åœ°ç¼“å­˜ä¸­è·å–å¹¶è¿”å›ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½ä»å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚ç£ç›˜ï¼‰ä¸­è¯»å–ï¼Œè¿™æ ·å¯ä»¥åŠ å¿«å“åº”é€Ÿåº¦ï¼Œå‡è½»æœåŠ¡å™¨çš„ I/O è´Ÿæ‹…  

    åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å¯èƒ½å­˜åœ¨ä»£ç†æœåŠ¡å™¨  
    ä»£ç†æœåŠ¡å™¨ä¹Ÿå¯ä»¥å¯¹ç»è¿‡å®ƒçš„è¯·æ±‚å’Œå“åº”è¿›è¡Œç¼“å­˜ã€‚å½“å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚ç›¸åŒçš„èµ„æºæ—¶ï¼Œä»£ç†æœåŠ¡å™¨å¯ä»¥ç›´æ¥å°†ç¼“å­˜çš„èµ„æºè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½å‘æºæœåŠ¡å™¨è¯·æ±‚ï¼Œè¿™å¯ä»¥æœ‰æ•ˆå‡å°‘ç½‘ç»œå¸¦å®½çš„å ç”¨å’ŒæºæœåŠ¡å™¨çš„è´Ÿè½½  

    ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå…¬å¸å†…éƒ¨ç½‘ç»œä¸­ï¼Œä»£ç†æœåŠ¡å™¨å¯ä»¥ç¼“å­˜ç»å¸¸è®¿é—®çš„å¤–éƒ¨ç½‘ç«™èµ„æºï¼Œå¦‚å…¬å¸å‘˜å·¥ç»å¸¸è®¿é—®çš„æ–°é—»ç½‘ç«™çš„é¦–é¡µå†…å®¹ï¼Œå½“å…¶ä»–å‘˜å·¥å†æ¬¡è®¿é—®è¯¥æ–°é—»ç½‘ç«™é¦–é¡µæ—¶ï¼Œä»£ç†æœåŠ¡å™¨å°±å¯ä»¥ç›´æ¥æä¾›ç¼“å­˜çš„å†…å®¹ï¼Œæé«˜è®¿é—®æ•ˆç‡

=== "CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰"

    CDN æ˜¯ä¸€ç§åˆ†å¸ƒå¼çš„å†…å®¹ç¼“å­˜æœåŠ¡å™¨ç½‘ç»œï¼Œå®ƒå°†ç½‘ç«™çš„å†…å®¹ï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ã€é™æ€ç½‘é¡µç­‰ï¼‰ç¼“å­˜åˆ°ç¦»ç”¨æˆ·è¾ƒè¿‘çš„å¤šä¸ªèŠ‚ç‚¹æœåŠ¡å™¨ä¸Šã€‚  
    å½“ç”¨æˆ·è¯·æ±‚è¿™äº›å†…å®¹æ—¶ï¼ŒCDN ä¼šæ ¹æ®ç”¨æˆ·çš„åœ°ç†ä½ç½®ç­‰å› ç´ ï¼Œå°†è¯·æ±‚è·¯ç”±åˆ°ç¦»ç”¨æˆ·æœ€è¿‘çš„èŠ‚ç‚¹æœåŠ¡å™¨ï¼Œè¯¥èŠ‚ç‚¹æœåŠ¡å™¨ç›´æ¥ä»æœ¬åœ°ç¼“å­˜ä¸­è¿”å›å†…å®¹ç»™ç”¨æˆ·ï¼Œä»è€Œå¤§å¤§å‡å°‘äº†å†…å®¹ä¼ è¾“çš„å»¶è¿Ÿï¼Œæé«˜äº†ç”¨æˆ·è®¿é—®é€Ÿåº¦å’Œä½“éªŒ  

    ä¾‹å¦‚ï¼Œä¸€ä¸ªå¤§å‹çš„è§†é¢‘ç½‘ç«™å¯èƒ½ä¼šåœ¨å…¨çƒéƒ¨ç½²å¤šä¸ª CDN èŠ‚ç‚¹ï¼Œå½“ç”¨æˆ·åœ¨ä¸åŒåœ°åŒºè®¿é—®è¯¥ç½‘ç«™çš„è§†é¢‘æ—¶ï¼ŒCDN ä¼šå°†è§†é¢‘å†…å®¹ä»ç¦»ç”¨æˆ·æœ€è¿‘çš„èŠ‚ç‚¹æä¾›ï¼Œè€Œä¸æ˜¯ä»ç½‘ç«™çš„æºæœåŠ¡å™¨è·å–ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆåº”å¯¹å¤§é‡ç”¨æˆ·çš„è®¿é—®è¯·æ±‚ï¼Œä¿è¯è§†é¢‘çš„æµç•…æ’­æ”¾

=== "Cookies"

    è™½ç„¶ HTTP æœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼Œä½†é€šè¿‡ cookies å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå®ç°çŠ¶æ€çš„ä¿æŒ  
    æœåŠ¡å™¨å¯ä»¥åœ¨å“åº”ä¸­è®¾ç½® cookiesï¼Œå®¢æˆ·ç«¯ä¼šå°† cookies ä¿å­˜åœ¨æœ¬åœ°  
    åœ¨åç»­çš„è¯·æ±‚ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å°†ç›¸å…³çš„ cookies ä¸€èµ·å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¯ä»¥æ ¹æ® cookies ä¸­çš„ä¿¡æ¯è¯†åˆ«å‡ºå®¢æˆ·ç«¯çš„èº«ä»½å’Œä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€ä¸ªæ€§åŒ–è®¾ç½®ç­‰  

    cookies å¯ä»¥ç”¨äºå¿«é€Ÿè®¤è¯ç”¨æˆ·èº«ä»½ï¼Œé¿å…ç”¨æˆ·åœ¨æ¯æ¬¡è®¿é—®éœ€è¦è®¤è¯çš„é¡µé¢æ—¶éƒ½é‡æ–°è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼ˆåœ¨ä¸€å®šæ—¶é—´èŒƒå›´å†…ï¼‰ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨äºä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œä¾‹å¦‚æ ¹æ®ç”¨æˆ·çš„åå¥½è®¾ç½®æ¥å±•ç¤ºä¸åŒçš„é¡µé¢å†…å®¹æˆ–åŠŸèƒ½  

    ä¾‹å¦‚ï¼Œä¸€ä¸ªç”µå•†ç½‘ç«™å¯ä»¥æ ¹æ®ç”¨æˆ·çš„ cookies ä¸­ä¿å­˜çš„è´­ç‰©åå¥½ï¼Œåœ¨é¦–é¡µæ¨èç”¨æˆ·å¯èƒ½æ„Ÿå…´è¶£çš„å•†å“

---

3. æŒç»­è¿æ¥ä¸éæŒç»­è¿æ¥

  * **éæŒç»­è¿æ¥** ï¼šåœ¨ HTTP/1.0 ä¸­é»˜è®¤ä½¿ç”¨éæŒç»­è¿æ¥ã€‚å½“å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚åï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†å®Œè¯·æ±‚å¹¶è¿”å›å“åº”åï¼Œå°±ä¼šå…³é—­ TCP è¿æ¥ã€‚å¦‚æœå®¢æˆ·ç«¯éœ€è¦å†æ¬¡è¯·æ±‚å…¶ä»–èµ„æºï¼Œå°±å¿…é¡»é‡æ–°å»ºç«‹ä¸€ä¸ªæ–°çš„ TCP è¿æ¥  
  è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œä½†ç¼ºç‚¹æ˜¯æ¯æ¬¡å»ºç«‹å’Œå…³é—­è¿æ¥éƒ½éœ€è¦æ¶ˆè€—ä¸€å®šçš„æ—¶é—´å’Œç³»ç»Ÿèµ„æºï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦è¯·æ±‚å¤šä¸ªèµ„æºï¼ˆå¦‚ä¸€ä¸ªç½‘é¡µä¸­çš„å¤šä¸ªå›¾ç‰‡ã€CSS æ–‡ä»¶ã€JavaScript æ–‡ä»¶ç­‰ï¼‰æ—¶ï¼Œä¼šé¢‘ç¹åœ°å»ºç«‹å’Œå…³é—­è¿æ¥ï¼Œå¯¼è‡´ç½‘ç»œå»¶è¿Ÿå¢åŠ ï¼Œå½±å“ç½‘é¡µçš„åŠ è½½é€Ÿåº¦ã€‚
  * **æŒç»­è¿æ¥** ï¼šä» HTTP/1.1 å¼€å§‹ï¼Œé»˜è®¤ä½¿ç”¨æŒç»­è¿æ¥ã€‚åœ¨æŒç»­è¿æ¥çš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åœ¨å»ºç«‹è¿æ¥åï¼Œå¯ä»¥åœ¨è¿™ä¸ªè¿æ¥ä¸Šå‘é€å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œè€Œä¸ä¼šç«‹å³å…³é—­è¿æ¥ã€‚è¿™æ ·å¯ä»¥å‡å°‘å»ºç«‹å’Œå…³é—­è¿æ¥çš„å¼€é”€ï¼Œæé«˜ä¼ è¾“æ•ˆç‡ã€‚ä¾‹å¦‚ï¼Œå½“å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªåŒ…å«å¤šä¸ªèµ„æºçš„ç½‘é¡µæ—¶ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ª TCP è¿æ¥ä¸­ä¾æ¬¡è¯·æ±‚è¿™äº›èµ„æºï¼ŒæœåŠ¡å™¨ä¾æ¬¡è¿”å›å“åº”ï¼Œç›´åˆ°å®¢æˆ·ç«¯å®Œæˆæ‰€æœ‰èµ„æºçš„è¯·æ±‚æˆ–è€…ä¸»åŠ¨å…³é—­è¿æ¥

---

4. RTTï¼ˆRound - Trip Timeï¼Œå¾€è¿”æ—¶é—´ï¼‰

RTT æ˜¯æŒ‡ä»å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚å¼€å§‹ï¼Œåˆ°å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å“åº”æ‰€ç»è¿‡çš„æ—¶é—´ã€‚å®ƒåŒ…æ‹¬è¯·æ±‚ä»å®¢æˆ·ç«¯ä¼ è¾“åˆ°æœåŠ¡å™¨çš„æ—¶é—´ï¼Œä»¥åŠæœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”çš„æ—¶é—´ï¼Œè¿˜æœ‰å“åº”ä»æœåŠ¡å™¨ä¼ è¾“å›å®¢æˆ·ç«¯çš„æ—¶é—´

RTT æ˜¯è¡¡é‡ç½‘ç»œæ€§èƒ½çš„ä¸€ä¸ªé‡è¦æŒ‡æ ‡ã€‚åœ¨ HTTP é€šä¿¡ä¸­ï¼Œè¾ƒå°çš„ RTT æ„å‘³ç€å®¢æˆ·ç«¯å¯ä»¥æ›´å¿«åœ°è·å–åˆ°æœåŠ¡å™¨çš„å“åº”ï¼Œä»è€Œæé«˜ç”¨æˆ·ä½“éªŒã€‚ä¼˜åŒ– RTT å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼Œå¦‚ä½¿ç”¨æ›´å¿«çš„ç½‘ç»œè¿æ¥ã€ä¼˜åŒ–æœåŠ¡å™¨æ€§èƒ½ã€é‡‡ç”¨å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆCDNï¼‰ç­‰

---

5. æµæ°´çº¿æ¨¡å¼ï¼ˆPipeliningï¼‰

åœ¨ HTTP çš„æµæ°´çº¿æ¨¡å¼ä¸‹ï¼Œå®¢æˆ·ç«¯å¯ä»¥åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸­åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œè€Œä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨å¯¹å‰ä¸€ä¸ªè¯·æ±‚çš„å“åº”ã€‚è¿™äº›è¯·æ±‚ä¼šæŒ‰ç…§å‘é€çš„é¡ºåºè¢«æœåŠ¡å™¨æ¥æ”¶å’Œå¤„ç†ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šæŒ‰ç…§é¡ºåºè¿”å›å“åº”

æµæ°´çº¿æ¨¡å¼å¯ä»¥æé«˜ HTTP çš„ä¼ è¾“æ•ˆç‡ï¼Œå°¤å…¶æ˜¯åœ¨è¯·æ±‚å¤šä¸ªå°èµ„æºï¼ˆå¦‚å¤šä¸ªå°å›¾æ ‡ã€å°å›¾ç‰‡ç­‰ï¼‰æ—¶ã€‚å› ä¸ºä¸éœ€è¦ç­‰å¾…æ¯ä¸ªè¯·æ±‚çš„å“åº”å†å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œå¯ä»¥å‡å°‘ç­‰å¾…æ—¶é—´ï¼Œæé«˜èµ„æºè·å–çš„é€Ÿåº¦ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªç½‘é¡µä¸­æœ‰å¤šä¸ªå°å›¾æ ‡éœ€è¦åŠ è½½ï¼Œä½¿ç”¨æµæ°´çº¿æ¨¡å¼å¯ä»¥æ›´å¿«åœ°è·å–è¿™äº›å›¾æ ‡ï¼ŒåŠ å¿«ç½‘é¡µçš„æ¸²æŸ“é€Ÿåº¦ã€‚

> ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜
> 
> - Socket ä¼ è¾“çš„æ˜¯å­—èŠ‚æµï¼Œå®ƒæœ¬èº«å¹¶ä¸åŒºåˆ†ä¸åŒçš„ HTTP è¯·æ±‚å’Œå“åº”ã€‚åœ¨æµæ°´çº¿æ¨¡å¼ä¸‹ï¼Œå®¢æˆ·ç«¯å‘é€çš„å¤šä¸ªè¯·æ±‚å’ŒæœåŠ¡å™¨è¿”å›çš„å¤šä¸ªå“åº”éƒ½æ˜¯ä»¥å­—èŠ‚æµçš„å½¢å¼åœ¨ Socket ä¸­ä¼ è¾“çš„ã€‚è¿™å°±éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨èƒ½å¤Ÿæ­£ç¡®åœ°è¯†åˆ«å’ŒåŒºåˆ†ä¸åŒçš„è¯·æ±‚å’Œå“åº”ï¼Œé€šå¸¸é€šè¿‡ HTTP çš„å¤´éƒ¨ä¿¡æ¯ï¼ˆå¦‚ Content - Lengthã€Connection ç­‰å¤´éƒ¨å­—æ®µï¼‰æ¥å®ç°
> 
> - å¦‚æœæœåŠ¡å™¨å¯¹å‰é¢çš„è¯·æ±‚å¤„ç†æ—¶é—´è¾ƒé•¿ï¼Œå¯èƒ½ä¼šå¯¼è‡´åé¢çš„è¯·æ±‚åœ¨ç®¡é“ä¸­è¢«é˜»å¡ï¼Œå½±å“æ•´ä½“çš„ä¼ è¾“æ•ˆç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè¯·æ±‚æ˜¯ä¸€ä¸ªéœ€è¦å¤æ‚è®¡ç®—çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¤„ç†æ—¶é—´è¾ƒé•¿ï¼Œé‚£ä¹ˆåœ¨åŒä¸€ä¸ªç®¡é“ä¸­çš„åç»­è¯·æ±‚å°±ä¼šç­‰å¾…å‰é¢çš„è¯·æ±‚å¤„ç†å®Œæˆæ‰èƒ½å¾—åˆ°å“åº”
> 
> - åœ¨æµæ°´çº¿æ¨¡å¼ä¸‹ï¼Œå¦‚æœæŸä¸ªè¯·æ±‚å‡ºç°é”™è¯¯ï¼Œå¯èƒ½ä¼šå¯¹åç»­çš„è¯·æ±‚å’Œå“åº”äº§ç”Ÿå½±å“ï¼Œå› ä¸ºè¯·æ±‚å’Œå“åº”çš„é¡ºåºå¯èƒ½ä¼šè¢«æ‰“ä¹±ï¼Œæˆ–è€…éœ€è¦é¢å¤–çš„æœºåˆ¶æ¥å¤„ç†é”™è¯¯æƒ…å†µï¼Œè¿™å¢åŠ äº†å®ç°çš„å¤æ‚æ€§ã€‚

---

#### HTTPåè®®æ¼”è¿›

!!! abstract ""

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/FpivbZbZqokjOHxaYXicnnrznXb.jpg)

!!! tip "HTTP2â€”å¤šè·¯å¤ç”¨ã€HOLã€æµã€å‹ç¼©å¤´"

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/ZTtEbcrDNogZklxPjhFclgcrnNe.jpg)


!!! tip "QUICâ€”â€”è®© UDP å˜å¾—å®‰å…¨"

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/SiupbyjZQobvJaxifIDcmAVQn9e.jpg)

!!! tip "HTTP3"

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/KXRjbjWT5oYxzzx3p6Zc1XPwnzZ.jpg)

---


### DNS åè®®

!!! abstract "æ‰€æœ‰çŸ¥è¯†ç‚¹ã®æ€»ç»“"

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/202502231416.png) 

    - é—®ç­”ä»¥ UDP ä¼ é€’

    - 53 ç«¯å£

    - **è¿­ä»£** é—®ç­”å…·ä½“æ ¼å¼--èµ„æºè®°å½• RR--åŒ…æ‹¬ï¼ˆname value type ttlï¼‰

---

### FTP åè®®

??? abstract "ä½ åº”è¯¥çŸ¥é“çš„"
    
    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/AQYDbfZZZoPmeOx7zojc05d8npd.png)
    
    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/XoSMbtTtbo20fMxo157cJqIXnxg.png)

    - 21/20 ç«¯å£
    - ä»¥ TCP å»ºç«‹è¿æ¥
    - åŒä¿¡é“ï¼Œä¸€é“æŒ‡ä»¤ï¼ˆ21ï¼‰ï¼Œä¸€é“æ–‡ä»¶ä¼ è¾“ï¼ˆ20ï¼‰
    - æœ‰ activeï¼ˆPORTï¼‰/passiveï¼ˆPASVï¼‰ä¸¤ç§ï¼Œå‰è€… server ä¼šä¸»åŠ¨å»ºç«‹æ–‡ä»¶ä¿¡é“ç»™ clientï¼Œpassive åˆ™éœ€è¦ client è‡ªå·±ä¸»åŠ¨å†è¿

---

### SMTP/POP3 åè®®


??? abstract "ä½ åº”è¯¥çŸ¥é“çš„"

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/P97nbDEDgoDLU2xQejhcLySznld.jpg "æ³¨æ„ï¼š7 æ¯”ç‰¹")

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/Zto2b6xh7oNptKx1ZRIcUS3In8l.png)

    - MIMEç”¨äºå‘é€å›¾ç‰‡ï¼Œä¸­æ–‡ç­‰ï¼Œç”¨Base64ç­‰ç¼–ç æ–¹å¼ç¼–ç ä¸ºASCII
    - Base64ï¼ˆå–6è¡¥2ï¼Œä¸‰ç‰‡å˜å››ç‰‡ï¼Œç»“å°¾ä¸å¤ŸåŠ =ï¼Œç›´åˆ°å‡‘4ç‰‡ï¼‰/QPç¼–ç 
    - ä½¿ç”¨`.`ç»“æŸé‚®ä»¶
    
    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/OtmsbJ210oFJyQx2FZGcCcgfnKd.png "MIME type")

    !!! quote ""

    - ä¸»è¦æ¥æ”¶åè®®ï¼šPOP3/IMAPï¼ˆå¸¸è§äºç§»åŠ¨ç«¯ï¼‰/HTTPï¼ˆç½‘é¡µç«¯ï¼‰

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/Q4JibnhTroOrUMxwkmscUt8GnCe.png)

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/GvJEbxLVpowoebxVcBach4QlnMb.png "åŸºæœ¬æ”¶å‘è¿‡ç¨‹")

---


### IMAP åè®®

Â¯\\_(ãƒ„)\_/Â¯ï¼š [IMAP åè®®è§£æ](https://zhuanlan.zhihu.com/p/446369720)

---

### P2Påè®®

æœ‰ centralized dictionary | query blooding | KaZaA ä¸‰ç§å½¢å¼


- centralized dictionary  
  èµ„æºåˆ†å¸ƒåœ¨å„ä¸ªpearé‡Œé¢è€Œéé›†ä¸­åœ¨æœåŠ¡å™¨ï¼Œæ¯ä¸ªClientå‘serveræä¾›æ„¿æ„åˆ†äº«çš„èµ„æº  
  æœåŠ¡å™¨åªéœ€è¦æä¾›ç›®å½•ï¼Œpearé€šè¿‡ç›®å½•å°±è¿‘å¯»æ‰¾æœ€è¿‘çš„èŠ‚ç‚¹pearä¸‹è½½  
  ä½†æ˜¯å­˜åœ¨å•ç‚¹å¤±æ•ˆé—®é¢˜ï¼Œç‰ˆæƒé—®é¢˜



- query blooding    
  å‡ ä¹å»ä¸­å¿ƒåŒ–ï¼Œé€šè¿‡ç†Ÿäººä¸€ä¸ªä¸ªé—®  
  äººäººæœ‰è´£ï¼Œäººäººæ— è´£ï¼ˆno leaderï¼‰  
  ä½†æ˜¯å ç”¨è¾ƒå¤šå¸¦å®½

- KaZaA  
  ç»¼åˆå‰ä¸¤è€…ï¼Œå­˜åœ¨ç»„é•¿  
  ä½†åè®®å¤æ‚

---

### DHCPåè®®

- åŸºäº UDP | 67 server ç«¯å£ | 68 client ç«¯å£

- åŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼ˆDynamic Host Configuration Protocolï¼ŒDHCPï¼‰æ˜¯TCP/IPåè®®æ—ä¸­çš„ä¸€å‘˜ï¼Œç”¨äºåŠ¨æ€é…ç½®IPåœ°å€ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç”¨é€”

    - ç½‘ç»œåœ°å€è‡ªåŠ¨é…ç½®ï¼ˆNetwork Address Auto Configurationï¼ŒNAAï¼‰ï¼šå½“ä¸€å°è®¡ç®—æœºåŠ å…¥åˆ°ç½‘ç»œæ—¶ï¼ŒDHCPæœåŠ¡å™¨ä¼šè‡ªåŠ¨ä¸ºå…¶åˆ†é…IPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³åœ°å€ç­‰ç½‘ç»œå‚æ•°
    - ç½‘ç»œå‚æ•°è‡ªåŠ¨åˆ†é…ï¼ˆDynamic Host Configuration Protocol for IPv6ï¼ŒDHCPv6ï¼‰ï¼šIPv6çš„DHCPåè®®ä¸IPv4çš„DHCPåè®®ä¸åŒï¼Œå®ƒä½¿ç”¨æ›´å¤æ‚çš„ç®—æ³•æ¥åˆ†é…IPv6åœ°å€
    - è¿œç¨‹ç½‘ç»œè®¿é—®ï¼ˆRemote Accessï¼‰ï¼šDHCPå¯ä»¥è®©ç”¨æˆ·è¿œç¨‹è¿æ¥åˆ°ç½‘ç»œï¼Œè€Œæ— éœ€æ‰‹åŠ¨é…ç½®IPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³åœ°å€ç­‰ç½‘ç»œå‚æ•°
    - åŸŸåç³»ç»Ÿï¼ˆDomain Name Systemï¼ŒDNSï¼‰ï¼šDHCPå¯ä»¥æä¾›åŸŸåè§£ææœåŠ¡ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥è®¿é—®ç½‘ç»œä¸Šçš„è®¡ç®—æœº

- DHCPåè®®å·¥ä½œè¿‡ç¨‹  

    1. å®¢æˆ·æœºå‘é€DHCPDiscoveryå¹¿æ’­åŒ…å‘ç°DHCPæœåŠ¡å™¨ï¼Œè¯·æ±‚IPåœ°å€ï¼ˆåŒ…é‡Œé¢æœ‰MACåœ°å€ï¼‰
    2. æœåŠ¡å™¨å‘é€DHCPOfferå¹¿æ’­åŒ…ï¼ˆè¿”å›MACå’ŒIPï¼‰(è¿™é‡Œå¯èƒ½æœ‰å¤šä¸ªæœåŠ¡å™¨å“åº”ï¼‰
    3. å®¢æˆ·æœºå‘é€DHCPRequestå¹¿æ’­åŒ…å‘ŠçŸ¥ç­›é€‰ç»“æœ
    4. ç­›é€‰å‡ºçš„æœåŠ¡å™¨å‘é€DHCPACKï¼ˆacknowledgeï¼‰å¹¿æ’­åŒ…ï¼ˆä»“åº“æ•°æ®æ‰“åŒ…ä¸€ä»½é€ç»™å®¢æˆ·æœºï¼‰ï¼Œæ›´æ–°ç§Ÿçº¦è¡¨
    5. ç§ŸæœŸè¿‡50%ï¼Œè·³è½¬è‡³`c`
    6. è‹¥`e`æ— ååº”ï¼Œç§ŸæœŸè¿‡`87.5%`ï¼Œè·³è½¬è‡³`c`
    7. ç§Ÿçº¦åˆ°æœŸï¼Œåˆ™è·³è½¬è‡³`a`
    8. è‹¥è¯·æ±‚æ— å“åº”ï¼Œåˆ™è‡ªè¡Œåˆ†é…169.245.X.X/16æ— æ•ˆ IPnetmask 255.255.0.0

---

## ä¼ è¾“å±‚åè®®

> ä¸å¦¨ç›´æ¥çœ‹[äººå®¶çš„ç¬”è®°](https://josonle.github.io/blog/2018-10-21-%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82%E6%80%BB%E7%BB%93.html/)ğŸ¤ª

### TCP&&UDPâ€”ç«¯åˆ°ç«¯æœåŠ¡

- UDPï¼š æ— è¿æ¥ï¼ˆæ²¡æœ‰æŒç»­è¿æ¥ï¼‰
- TCPï¼š æ— çŠ¶æ€

!!! info "ä»–ä»¬çš„æ‚²æ¬¢å¹¶ä¸ç›¸é€š"
    
    - TCPä¼šå¹³åˆ†é“¾è·¯ã€‚useré€Ÿåº¦å…ˆå¿«ï¼Œåæ…¢ä¸‹æ¥ï¼Œæœ€åå¹³è¡¡  
    - UDPä¼šç›´æ¥æˆªæ–­TCPä¼ è¾“

- **rdt**ï¼š[RDT åè®® (å¯é æ•°æ®ä¼ è¾“åè®®)_rdt å®ç°](https://blog.csdn.net/m0_63657524/article/details/121916128)  
  1. ç”¨ACK/NAKå¤„ç†å·®é”™--2.0  
  2. ç”¨seq numå¤„ç†ä¹±åº--2.1  
  3. é‡å¤ACKä»£æ›¿NAK--2.2  
  4. è¶…æ—¶é‡å‘--3.0  
  5. ç”¨æµæ°´çº¿æé«˜é€Ÿåº¦ï¼Œè§„é¿FSMä¸‹çš„åœç­‰åè®®  


---

### GBN/SR

æµæ°´çº¿ä¸‹çš„ä¸¢åŒ…è§£å†³æ–¹æ¡ˆ

!!! tip "éœ€è¦æ³¨æ„çš„"
    
    1. SRä¼šç›´æ¥è¾“å‡ºä¹±åºçš„seqå¹¶ç¼“å­˜
    2. GBNä¼šè¾“å‡ºå·²ç»æŒ‰é¡ºåºæ¥æ”¶åŒ…ä¸­çš„æœ€å¤§é¡ºåº
    3. GBNæœ‰ç´¯è®¡ç¡®è®¤ï¼ŒSRä¸€ä¸ªä¸€ä¸ªç¡®è®¤

---


### TCPåè®®ä¼ è¾“è¿‡ç¨‹

- é¢å‘å¯¹è±¡çš„è¿æ¥
- è®¾å®šåˆå§‹åºåˆ—å·ä¸ç¼“å­˜ï¼ˆbuffersï¼‰ã€æµé‡æ§åˆ¶  
- å®¢æˆ·ç«¯åˆ›å»ºsocketï¼ŒæœåŠ¡å™¨å‡†å¤‡æ¥æ”¶socket
        
!!! abstract "ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥"

    1. å‘é€SYNï¼ˆç»™seq#ï¼Œæ¯æ¬¡å¼€å§‹32å­—èŠ‚ç»å¯¹åºå·éšæœºï¼Œno dataï¼‰  
    2. å›SYN ACKï¼ˆå›seqï¼‰  
    3. å‘é€ ACKï¼ˆç¡®è®¤seqï¼‰    
    > å›åŒ…çš„ackç”±å‘åŒ…çš„seq+lenå†³å®šï¼ŒåŒ…çš„ä¸‹ä¸€ä¸ªseq_i=seq_(i-1)+len;     

    ``` mermaid
    sequenceDiagram
        participant Client
        participant Server

        Client->>Server: SYN (seq=x)
        Note left of Client: Client â†’ SYN_SENT
        Server->>Client: SYN-ACK (seq=y, ack=x+1)
        Note right of Server: Server â†’ SYN_RCVD
        Client->>Server: ACK (ack=y+1)
        Note left of Client: Client â†’ ESTABLISHED
        Note right of Server: Server â†’ ESTABLISHED

    ```
             
!!! abstract "å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥"
    1.å‘é€FIN   
    2.å›ACK  
    3.å›FIN  
    4.å‘é€ACK  
    5.ç­‰å¾…å®šæ—¶å™¨ç»“æŸ

    ``` mermaid
    sequenceDiagram
        participant Client
        participant Server

        Client->>Server: FIN (seq=u)
        Note left of Client: Client â†’ FIN_WAIT_1
        Server->>Client: ACK (ack=u+1)
        Note right of Server: Server â†’ CLOSE_WAIT
        Server->>Client: FIN (seq=v, ack=u+1)
        Note right of Server: Server â†’ LAST_ACK
        Client->>Server: ACK (ack=v+1)
        Note left of Client: Client â†’ TIME_WAIT 
        Note right of Server: Server â†’ CLOSED

    ```
    

### ç«¯åˆ°ç«¯ä¼ è¾“

- æµé‡æ§åˆ¶ï¼šä¸ºå‘é€ç«¯å’Œæ¥æ”¶ç‚¹åº”ç”¨å±‚æå–æ•°æ®çš„é€Ÿåº¦è¿›è¡ŒåŒ¹é…  
  speed matchï¼ˆé€Ÿåº¦åŒ¹é…ï¼‰/æ»‘åŠ¨çª—å£
    
- QoSï¼šä¼ è¾“å±‚è´¨é‡æœåŠ¡ï¼ˆQuality of Serviceï¼‰    
    é€šè¿‡é‡‡æ ·è¯„ä¼°é€Ÿåº¦ï¼Œç¡®å®štimeoutæ—¶é—´  
    1. æŒ‡æ•°å¹³ç§»æ³•  $estimated_{rtt}=0.875*å‰n-1æ¬¡estimated_{rtt}+0.125*ç¬¬næ¬¡sample_{rtt}$  
    2. åŠ ä¸Šå®‰å…¨ä½™é‡ $devrtt=0.75*devrtt+0.25*|estimated_{rtt}-sample_{rtt}(è®¡ç®—å·®å€¼)|$    
    3. timeoutæ—¶é—´= $estimated_{rtt}+4*devrtt$  

- å¿«é€Ÿé‡ä¼ ï¼šè¿ç»­ä¸‰æ¬¡æ”¶åˆ°é‡å¤ackã€‚ä¸€æ¬¡æ­£å¸¸ä¸¤ä¸ªä¹±åº

!!! abstract "æ‹¥å¡æ§åˆ¶"

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/AzFTbKRhnoTPb2x4ayPcECjSn5c.jpg)

    1. ç¼“å­˜å¤Ÿï¼Œå¸¦å®½æœ‰é™ï¼šè¾“å…¥é¥±å’Œä½†ä¸ä¼šä¸¢åŒ…ã€‚å»¶æ—¶å¾ˆå¤§ï¼Œä¸€ç›´ **æ’é˜Ÿ**  
    2. ç¼“å­˜æœ‰é™ï¼Œå¸¦å®½æœ‰é™ï¼šåœ¨`1`çš„åŸºç¡€ä¸Šå‡ºç° **ä¸¢åŒ…é‡å‘** ï¼Œå†æ¬¡å ç”¨å¸¦å®½ï¼Œè¾“å…¥å¤§äºè¾“å‡ºï¼Œ **æ–œç‡<1** ï¼Œæ•ˆç‡é™ä½  
    3. å¤šä¸ªè·¯ç”±å™¨ï¼š **è¾“å‡ºéšè¾“å…¥å…ˆå¢å¤§åå‡å°‘ã€‚èŠ‚ç‚¹å˜å¤šï¼Œå¤šé‡ä¼ å ç”¨ï¼Œæœ€åæ­»é”**
        
!!! abstract "æ‹¥å¡æ§åˆ¶æ–¹æ³•"
            
    - Network-assisted congestion control ç½‘ç»œååŠ©æ‹¥å¡æ§åˆ¶ï¼Œ **è·¯ç”±å™¨åˆ†æ** å¹¶feedback  
    - End-end congestion control **ç«¯åˆ°ç«¯æ‹¥å¡æ§åˆ¶**ï¼Œé€šè¿‡å¯¹æ”¶å‘ä¸¤ç«¯çš„ **ä¸¢åŒ…ä¸å»¶æ—¶** è¿›è¡Œè§‚å¯Ÿ  
        
    <span style="border-bottom: 1.5px dashed orange;">senderæ–¹</span>  

    - LastByteSent - LastByteAcked <= CongWin(å‘é€é€Ÿåº¦çª—å£)  
    - rate(å‘é€é€Ÿç‡) = CongWin/RTT  
    è¶…æ—¶æˆ–ä¸‰æ¬¡é‡ä¼ ï¼ˆä¸¢åŒ…äº‹ä»¶ï¼‰æ—¶ï¼Œrateå‡é€Ÿ
    
    ---
    
    å‡é€Ÿé€»è¾‘

    1. AIMDâ€”additive increase && multiplicative decreaseâ€”åŠ å¢ä¹˜å‡  
    2. slow start  
    3. Conservative after timeout events(ä¿å®ˆ)  
    
    !!! tip "è§£é‡Š"
        - è¿ç»­ackï¼Œåˆ™ä¸‹æ¬¡CongWinæŒ‡æ•°å˜å¤§ã€‚å¼€å§‹å¢é•¿å¾—æ…¢ï¼Œåé¢å¿«ã€‚(æ‹¥å¡é¿å…)è¶…è¿‡é˜ˆå€¼åçº¿æ€§å˜å¤§  
        - ä¸¢åŒ…åé˜ˆå€¼å˜ä¸ºæœ€å¤§å€¼çš„ä¸€åŠ  
        - å¿«é€Ÿé‡ä¼ ï¼Œåˆ™CongWinä»é˜ˆå€¼å¼€å§‹ï¼›timeoutï¼Œåˆ™CongWiné‡æ–°slow start  

    !!! abstract "å¿«é€Ÿé‡ä¼ çš„ æ‹¥å¡çª—å£=é˜ˆå€¼ +3ï¼Œæ­¤å›¾ä¸å¤Ÿä¸¥è°¨"
        ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/LPUobiuQFoyzYBxxNHBcIzLhnXW.png)
    
---


## ç½‘ç»œå±‚

### IPåè®®

å…·ä½“è§æˆ‘é£ä¹¦ç¬”è®°ä¹‹[ç½‘ç»œå®‰å…¨ç¬”è®°](https://o2ywbvn10e.feishu.cn/docx/KYY2dSm3joBWPfxBNLXcxsIincf#share-UbVedNefmoOQgKxnd9QccZpInVA)

!!! quote "çªç„¶å‘ç°è¿™ä¸€ä»½å†™å¾—æ¯”è®¡ç½‘ç¬”è®°å¥½å¤šäº†ğŸ¤£"

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/I0YqbK8OWotTZjxBr7eccGSxnDd.png)

### è·¯ç”±å™¨--æ‰¾è·¯å¾„

!!! abstract "è·¯ç”±é€‰æ‹©ç®—æ³•"
    
    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/Pvy4bfBCko5mIaxGwDZc6a4Onqe.png)
    
    ååˆ’åˆ†ç½‘ç»œï¼Œæ¯ä¸€ä¸ªå†…ç½‘ä¸ºä¸€ä¸ª ASï¼Œç”¨ä¸€ç§å¯»è·¯ç®—æ³•
 
- ASï¼š**è‡ªæ²»ç³»ç»Ÿ**
  - Stub(æ¡©) ASï¼šå•ç‚¹å‡ºå£
  - Multihomed() ASï¼šå¤šç‚¹å‡ºå£
  - Transit ASï¼šè¿è¥å•†è¿æ¥
- Inter-ASï¼šBGP åè®®â€”â€”è¿æ¥ Intra-AS
    > å‚è€ƒï¼š[BGPåè®®æ€»ç»“](https://blog.csdn.net/keith6785753/article/details/107088632)  
- Intra-ASï¼ˆè‡ªåˆ¶ç³»ç»Ÿå†…çš„è·¯ç”±åè®®ï¼‰
    - IGP(å†…éƒ¨ç½‘å…³åè®®)ï¼šRIPã€OSPFã€IGRP  
    - RIP--åŸºäºè·ç¦»å‘é‡ç®—æ³•  
    - OSPFï¼ˆopen shortest path firstï¼‰ï¼šæœ€çŸ­è·¯å¾„ä¼˜å…ˆ  

---

### å­ç½‘åˆ’åˆ†

**CIDR**

- é€šè¿‡æ©ç æ¥ç¡®å®šå­ç½‘åˆ’åˆ†åçš„ç½‘æ®µä½æ•°ï¼šé€ä½&è¿ç®—
- è¡¨è¾¾æ–¹å¼ï¼š`10.22.155.25 255.255.255.0`æˆ–`10.22.155.25/24`
- 255.255.192.0 === /18 === 16+2ä½ç½‘æ®µ
--- 
- æŸå­ç½‘ä¸»æœºæ•°ï¼š256-192-2
- åˆ†å‰²å­ç½‘æ•°é‡ï¼šè§ä¸‹å›¾
- å­ç½‘æ•°çœ‹å‰é¢å äº†å‡ ä½1ï¼Œä¸»æœºæ•°çœ‹åé¢å‰©å‡ ä½0  

!!! abstract "å­ç½‘åˆ’åˆ†"
    
    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/bac0f281-73e0-44f9-9843-4b5beb2f07ee.jpg)

---


## æ•°æ®é“¾è·¯å±‚

> è´Ÿè´£å†…ç½‘ç›¸é‚»èŠ‚ç‚¹çš„é€šä¿¡

éœ€è¦ä¿è¯èŠ‚ç‚¹ä¼ è¾“æ•°æ®çš„å¯é æ€§ï¼ŒAdd æµé‡æ§åˆ¶/é”™è¯¯æ£€æµ‹ä¸çº é”™/å…¨åŒå·¥é€šä¿¡

é€šä¿¡æ–¹å¼ï¼šPPP | ä»¥å¤ªç½‘-> å¤šè·¯è®¿é—®åè®®

### é€šä¿¡åè®®

**Slotted Aloha**

- ä»¥å¸§ä¸ºå•ä½åŒä¸€ CLKï¼ˆsynchronizationï¼‰åœ¨åŸºå¸¦ä¸Šï¼Œå‡ºç°ç¢°æ’åˆ™æ”¾å¼ƒï¼Œæ•ˆç‡ä¸º 0.37

**Pure Aloha**

- å¼‚æ­¥ CLK ï¼Œno synchronization,simpler | æ•ˆç‡ä¸º 0.18

!!! abstract ""

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/A4xxbp420oNmSlxfrIYcklwRnfb.png)

**CSMA** ï¼ˆcarrier sense multiple accessï¼‰è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®

!!! abstract "listen before transmit"

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/353c23f8-0888-47c2-aebf-9f149684a3e3.png)

**CSMA/CD** ï¼ˆcollusion detectionï¼‰å†²çªç›‘æµ‹

!!! abstract ""

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/4c5ab4bf-8411-40f9-bf67-1a43704e7528.png)

    - å¸§æœ‰æœ€å°å•ä½ã€‚è¿‡å°åˆ™åœ¨å†²çªä¿¡å·å›ä¼ å‰å°±ç»“æŸäº†  
    - å­˜åœ¨éšè—ç»ˆç«¯é—®é¢˜ï¼Œæ— é™éš”ç¦»ä¸‹spaceæ— é™è¿œ
      
**CSMA/CA** ï¼ˆcollusion avoidanceï¼‰ï¼šå›é¿å†²çª

!!! abstract "é‡‡ç”¨æ•°æ®é“¾è·¯å±‚çš„ACK"

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/62119a8c-02e7-44d1-9383-dcbd11f3b910.png)



**RTS-CTS**

!!! abstract "å‘é€å‰é¢„çº¦" 
    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/a1756494-b8f6-4ba6-8451-d5cb3806b620.png)

---

### ARP åè®®

!!! info "æˆ‘æ˜¯å·æ‡’å¤§å¸ˆ"
    
    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/MzV2bHPLionWqexZlzOcgJxtnwc.png)
    
    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/McS0b6v6AoFP3YxMSJqchxzKnYb.png)

---

### Ethnet

- æ— è¿æ¥
- ä½¿ç”¨ CSMA/CD
- ç›‘æµ‹åˆ°ç”µå¹³å¼‚å¸¸ï¼Œæå‰æ”¾å¼ƒï¼ˆexponential backoff æŒ‡æ•°å›é€€ï¼‰ï¼Œå¹¶å…¨ç½‘å‘å¸ƒå†²çªä¿¡å· **JAM**â€”â€”48bitsã€‚
- exponential backoffï¼š$K*51.2 å¾®ç§’,K=Random\#\{0,1,2,...,2^{m-1}\},m=å†²çªæ¬¡æ•°$

---

### ç½‘æ¡¥ï¼ˆä½é…ç‰ˆäº¤æ¢æœºï¼‰


!!! abstract "å¯¹ CSMA/CD è¿›è¡Œåˆ†å‰²"

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/Qk0zbsObgoxyHyxZpGpclqhdnph.png)

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/MBg4bqdMKogil2xbWZ3czfKdnmh.png)

    ![](https://cdn.jsdelivr.net/gh/dixiLOG/blogStatic/VxHQbs6YCooY8hxYy5mcfO8VncS.png)
